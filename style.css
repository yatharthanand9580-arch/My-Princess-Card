:root{
  --bg1: linear-gradient(180deg,#ffeef6 0%, #fff0fb 100%);
  --bg2: linear-gradient(180deg,#fff6ff 0%, #f7f0ff 100%);
  --accent: #ff79c6;
  --muted: #7b6b8f;
  --soft-shadow: 0 8px 24px rgba(113,84,140,0.12);
  --glass: rgba(255,255,255,0.6);
  --radius: 18px;
  font-family: 'Poppins', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg1);
  color:#2c1b2e;
  overflow:hidden;
  display:flex;
  align-items:stretch;
  font-size:16px;
  -webkit-tap-highlight-color: transparent;
}

/* Page layout */
.page{
  width:100%;
  height:100vh;
  padding:28px;
  display:flex;
  align-items:center;
  justify-content:center;
  position:relative;
}
.hidden{display:none !important}

.centered{
  max-width:920px;
  width:100%;
  text-align:center;
  margin:0 auto;
}

/* Headings */
.heading{
  font-family:'Dancing Script', cursive;
  font-size:36px;
  margin:0 0 8px;
  letter-spacing:0.4px;
  color:#7d2b6f;
  text-shadow:0 6px 18px rgba(125,43,111,0.08);
}
.subheading{font-size:20px;margin:0 0 12px;color: #63385f;}
.intro{color:var(--muted); margin-bottom:18px}

/* Buttons */
button{
  cursor:pointer;
  border:0;
  border-radius:14px;
  padding:12px 20px;
  font-weight:600;
  font-size:16px;
  box-shadow:var(--soft-shadow);
  transition:transform .15s ease, box-shadow .15s;
}
button:active{transform:translateY(1px)}
.primary-btn{
  background:linear-gradient(90deg,#ff9ccf,#ff79c6);
  color:white;
  min-width:220px;
}
.ghost-btn{
  background:transparent;
  color:var(--muted);
  border:1px solid rgba(124,74,116,0.08);
  margin-left:12px;
}

/* GF photo */
.gf-photo-wrap{display:inline-block;padding:10px;border-radius:20px;background:var(--glass);box-shadow:0 10px 30px rgba(123,43,101,0.06);margin:14px 0}
.gf-photo{width:220px;height:220px;object-fit:cover;border-radius:18px;display:block;box-shadow:0 12px 30px rgba(124,43,124,0.06);border:6px solid rgba(255,240,249,0.9);transform:translateY(0);animation:floatScale 4s ease-in-out infinite}
@keyframes floatScale{0%{transform:translateY(0) scale(1)}50%{transform:translateY(-8px) scale(1.02)}100%{transform:translateY(0) scale(1)}}

/* Particles (simple decorative hearts) */
.particles, .particles.small{
  pointer-events:none;
  position:absolute;inset:0;
  background-image:
    radial-gradient(circle at 10% 10%, rgba(255,182,193,0.2) 0 2px, transparent 3px),
    radial-gradient(circle at 80% 40%, rgba(255,182,193,0.12) 0 3px, transparent 4px);
  mix-blend-mode:screen;
}

/* Envelope */
.envelope-stage{height:320px;display:flex;align-items:center;justify-content:center;margin:18px 0}
.envelope{width:260px;height:170px;position:relative;perspective:700px}
.envelope-body{
  position:absolute;left:0;right:0;bottom:0;top:0;
  background:linear-gradient(180deg,#fff8fb,#ffeef6);
  border-radius:12px;border:1px solid rgba(140,80,120,0.06);
  box-shadow:0 18px 40px rgba(120,60,100,0.08);
}
.envelope-flap{
  position:absolute;left:0;right:0;top:0;height:86px;
  transform-origin:top center;
  background:linear-gradient(180deg,#ffcce6,#ff9ccf);
  clip-path: polygon(0 0, 100% 0, 50% 100%);
  transition:transform 0.9s cubic-bezier(.2,.9,.3,1);
  transform:rotateX(0deg);
  border-radius:8px;
  box-shadow:0 8px 18px rgba(120,60,100,0.12);
}

/* letter hidden initially */
.letter{
  position:absolute;left:18px;right:18px;bottom:12px;height:120px;background:linear-gradient(180deg,#fff,#fff7fb);
  border-radius:10px;padding:12px;transform:translateY(0);transition:transform .9s cubic-bezier(.2,.9,.3,1),opacity .4s;
  box-shadow:inset 0 0 0 1px rgba(120,60,100,0.02);
}
.letter.hidden{opacity:0;transform:translateY(30px) rotate(-4deg)}
.letter-content{font-family:'Poppins';color:#6b3f55;padding:6px}
.letter-text{font-size:16px}

/* confetti */
.confetti{position:absolute;left:0;right:0;top:0;bottom:0;pointer-events:none;opacity:0;transition:opacity .3s}
.confetti.show{opacity:1}

/* continue button reveal */
#page2-continue{margin-top:16px}

/* Love letter card */
.card-wrap{display:flex;flex-direction:column;align-items:center;gap:16px}
.love-card{
  background:linear-gradient(180deg,#fff,#fff6fb);
  padding:24px;border-radius:20px;max-width:700px;box-shadow:var(--soft-shadow);
  text-align:left;color:#6a3b5d;font-size:18px;
}
.sticker{width:84px;position:absolute;right:28px;top:180px;opacity:.95}

/* Playlist */
.tracks-wrap{display:flex;gap:12px;overflow:auto;padding:10px 4px;margin:12px 0;scroll-behavior:smooth}
.track-card{min-width:140px;border-radius:14px;border:0;background:transparent;padding:6px;text-align:left}
.track-card:focus{outline:3px solid rgba(255,121,198,0.18);outline-offset:6px}
.track-art{width:140px;height:140px;object-fit:cover;border-radius:12px;box-shadow:0 8px 24px rgba(120,60,100,0.06)}
.track-title{margin-top:8px;font-weight:600;color:#5d2c52}

/* player */
.player{margin:8px 0;max-width:760px}
.player-row{display:flex;align-items:center;gap:12px}
.play-btn{width:68px;height:68px;border-radius:14px;font-size:24px;background:linear-gradient(180deg,#ffeef8,#ffcfe8);box-shadow:0 12px 30px rgba(120,50,100,0.08)}
.player-info{flex:1;text-align:left}
.player-title{font-weight:600;margin-bottom:6px}
.time-row{display:flex;align-items:center;gap:8px}
input[type=range]{width:100%}
.vol-row{width:90px}

/* Now playing pulse */
.now-playing{font-size:14px;margin-bottom:8px;opacity:0;transform:scale(0.98)}
.now-playing.show{opacity:1;animation:nowPulse 1.2s infinite}
@keyframes nowPulse{0%{transform:scale(1)}50%{transform:scale(1.04)}100%{transform:scale(1)}}

/* GIF cards flip */
.gif-cards{display:flex;gap:16px;justify-content:center;flex-wrap:wrap;margin:18px 0}
.gif-card{width:180px;height:180px;border-radius:14px;perspective:900px;cursor:pointer}
.flip-inner{position:relative;width:100%;height:100%;transition:transform .8s;transform-style:preserve-3d;border-radius:14px;box-shadow:var(--soft-shadow)}
.flip-front, .flip-back{position:absolute;inset:0;border-radius:14px;backface-visibility:hidden;display:flex;align-items:center;justify-content:center;padding:10px;background:linear-gradient(180deg,#fff,#fff7fb)}
.flip-front img{width:100%;height:100%;object-fit:cover;border-radius:12px}
.flip-back{transform:rotateY(180deg);font-weight:600;color:#5b2f53}
.gif-card.flipped .flip-inner{transform:rotateY(180deg)}

/* Accessibility helpers */
.sr-only{position:absolute;left:-9999px}
button:focus{outline:3px solid rgba(255,121,198,0.18);outline-offset:6px}

/* Responsive */
@media (max-width:640px){
  .gf-photo{width:160px;height:160px}
  .track-card{min-width:120px}
  .play-btn{width:56px;height:56px}
  .primary-btn{min-width:180px;padding:10px 16px}
}
